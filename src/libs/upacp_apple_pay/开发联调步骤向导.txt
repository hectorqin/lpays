一、开发前的准备工作(开发中务必将控件mode改为测试环境)
1. 打开https://open.unionpay.com/，后续说的文档下载、FAQ查询等都在这个平台操作。
2. 下载规范和开发包。帮助中心-下载-产品接口规范-手机控件支付产品接口规范，帮助中心-下载-产品接口规范-手机控件支付产品技术开发包。（ApplePay后台部分和控件产品相同，区别仅在于调起的控件不同。）
3. 开发人员都请先看下6.2的消费的交易流程。
4. 相关测试参数：
如果已签约，有自己的测试商户，则直接用自己的商户号测试，测试证书开发包里都有。* 尽量用真实商户号测试，防止有时候参数配错能尽早发现。
如果没有签约，或者商户号尚未分配，请在平台里自行获取商户并且开交易权限，方法为：
a) 左上角注册；
b) 登陆后右上角我的测试-测试参数
c) 我的测试-产品-选下自己集成的。

测试卡信息说明：
因Apple未提供测试环境，无法做完整的全流程测试。
目前测试时控件会去Apple读真实卡，但实际往后台交易时会替换为6259020040003629这个卡。
控件里显示交易的卡并不会真实交易，密码也可随意输入。
对账文件中的打码卡号都会显示为6259020040003629这个卡的打码后的信息。

二、客户端开发步骤
1. 参考文档《中国银联手机支付控件使用指南》（该文档位于前台开发包的doc目录下），建立一下工程。
2. 在后台开发实现消费（获取tn）请求前，App开发可以看看demo代码怎么调起控件的，demo里默认由银联的一个商户仿真获取tn（http://202.101.25.178:8080/sim/gettn或http://101.231.204.84:8091/sim/getacptn），之后需要改从商户自己的后台那里获取tn的。
3. 后台开发完成消费请求后，与后台开发商讨一下后台和app间传递tn的方式。
4. 改为从自己后台tn做测试。
5. 自行增加其他业务逻辑。

*  遇到问题可到https://open.unionpay.com/先自行看看能否解决：
1) 如果是代码异常：帮助中心-FAQ中把异常拷贝一小段搜索；或可以到FAQ的开发问题类别下，搜“安卓”或“iOS”可搜到对应的全量开发问题。
2) 如果是控件出错，报错信息有7位数字：技术集成-应答码，输入7位数字搜索。
3) 如果是控件出错，没有报错信息或没有7位数字：帮助中心-FAQ-测试问题，搜“app”可搜到控件的全量测试问题。
*  交易成功退出控件后开发包demo里有段验证签名的代码，代码默认是在手机app（此处就是指demo的app）中验签，请注意一定修改为传给后台进行验签，对应后台开发包demo的VerifyAppData文件。（验签公钥证书到期后需要更新的，如果放app里做会很难更新的。）


三、后台开发步骤
1. 打开后台开发包，找到对应语言\示例代码文件夹，看下readme.txt，按步骤部署、修改配置文件等。
2. 其中Form_6_2_AppConsume的接口可获取tn，请跟客户端开发确定一下后台和app间传递tn的方式，最简单的方法就是直接在页面打印tn，不过部分语言直接仅打印tn的时候会带换行符，建议手机开发在收到tn的时候trim一下。
3. 后续参考readme完成。

*  遇到问题可到https://open.unionpay.com/先自行看看能否解决：
1) 如果是代码异常：帮助中心-FAQ中把异常拷贝一小段搜索；或可以到FAQ的开发问题类别下，搜“java”、“c#”、“php”可搜到对应的全量开发问题。
2) 如果是正常收到应答respcode非00，可以看一下respMsg，里面的7位数字在平台上技术集成-应答码搜索。
3) 如果是其他错，在FAQ的测试问题类别下看看是否有自己遇到的问题。
